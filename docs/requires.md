# Web 端

功能点拆解（前端/后端）

1. h5 App 下载页面 
2. h5 内嵌页面示例 家庭互动
3. h5 内嵌页面示例 内容点播
4. h5 内嵌页面示例 绘本

地址见: https://baby.motorstore.cn/setting-public.json

<hr>


# Android Pad 功能清单

共 3 个界面，[图标包下载](../images.zip)

初始化时使用 A01 获取配置


## P1: 联系人界面

| 页面    | 设计稿    | 依赖接口 |  备注说明 |
|:-----------|:-----------|:-----------|:-----------|
| 默认界面 | [默认界面](../pad/01-0default.png) | A05: [/contact](/docs/api.html) | 左上方的回退按切换处理，切换进入说明界面 |
| 添加 	 | [添加 1 人](../pad/01-add1.png)、[添加 2 人](../pad/01-add2.png) | A06: [/contact/add](/docs/api.html) | 点击加好打开二维码，手机扫描 |
| 移除 	 | [移除提示](../pad/01-remove.png) | A07: [/contact/remove](/docs/api.html) | - |

详细需求解释：
1. 内置头像选择: 小女孩、小男孩，选择后获取 name == role == portrait
2. 界面无登录逻辑，使用 sn 在应用服务器校验，通过后直接进入 app，不通过提示“设备未授权”，A03: [/pad/login](/docs/api.html)
3. 第一次通过 sn 验证，应用服务器分配 id、name、portrait（如果已分配，使用之前分配的id），sn 与 id 锁死
4. 使用 sn + userId 到融云服务器验证，通过后返回 imtoken 进行连接
5. 添加或者删除时 Pad 通过消息通知手机，消息类型见 [messageType](./messages.html)
6. 手机收到通知后调用接口获取结果


## P2: 通话界面

| 页面    | 设计稿    | 依赖接口 |  备注说明 |
|:-----------|:-----------|:-----------|:-----------|
| 接收通话 	 | [接收到通话后](../pad/02-rtc.png) | RTC 服务 | 左上方的回退按切换处理，切换进入说明界面 |
| 主动发起通话 | [默认从联系人界面发起通话](../pad/01-add2.png) | RTC 服务  | 缺少接听 |

详细需求解释：
1. 主叫，也可以被叫
2. 1 对 1 音视频



## P3: 说明界面

| 页面    | 设计稿    | 依赖接口 |  备注说明 |
|:-----------|:-----------|:-----------|:-----------|
| 说明内容 	 | [界面](../pad/03-introduce.png) |  | 左上方的回退按切换处理，切换进入联系人界面 |
| 扫码绑定 	 | [右侧二维码](../pad/03-introduce.png) | A08: [二维码规则描述](/docs/api.html) | 二维码需定时更新 |
| 扫码下载 	 | [左侧二维码](../pad/03-introduce.png) | A09: [二维码规则描述](/docs/api.html) | 需要 h5 下载页面 |

详细需求解释：
1. 二维码在客户端生成、识别
2. 联系人头像根据 role 映射处理

<hr>


# Android 端、iOS 端


共 4 个界面，[图标包下载](./images.zip)


初始化时使用 A01 获取配置

## P1: 登录界面

| 页面    | 设计稿    | 依赖接口 |  备注说明 |
|:-----------|:-----------|:-----------|:-----------|
| 默认界面 	 | [界面](../phone/01-login.png) | A02: [/login](/docs/api.html) <br> A10: [/sms](/docs/api.html) | 无微信登录、qq登录 |

详细需求解释：
1. 增加选择角色（获取 role == name == portrait），6 个角色，本地缓存
2. 开发时需要用假接口，最后调试短信接口，任意手机号码都需要返回有效 imToken
3. 只有手机验证码登录（加上上一步信息），去掉第三方登录


## P2: 绑定界面（与 Pad 端 P1 联系人界面对应）

| 页面    | 设计稿    | 依赖接口 |  备注说明 |
|:-----------|:-----------|:-----------|:-----------|
| 默认界面 	 | [界面](../phone/02-0defalut.png) |  |  |
| 添加设备 	 | [扫码添加](../phone/02-add1.png) | A08: [二维码规则](/docs/api.html)  | <del>扫码成功后需要输入用户名</del> |
| 移除设备 	 | [点击删除](../phone/02-remove.png) | A07: [contact/remove](/docs/api.html) |  |

详细需求解释：
1. 扫码绑定需要到融云服务器校验，有数量限制
2. 数量由商务沟通，在云端配置
3. 手机端通过消息通知 Pad，消息类型见 [messageType](./messages.html)
4. Pad 收到通知后调用接口获取结果


## P3: 通话界面（与 Pad 端 P2 通话界面对应）

| 页面    | 设计稿    | 依赖接口 |  备注说明 |
|:-----------|:-----------|:-----------|:-----------|
| 默认界面 	 | [界面](../phone/03-rtc.png) | RTC 服务 | 界面注意区分主叫、被叫 |

详细需求解释：
1. 主叫、被叫
2. 提供呼叫方法给 h5 页面、其他原生界面


## P4: 我的

| 页面    | 设计稿    | 依赖接口 |  备注说明 |
|:-----------|:-----------|:-----------|:-----------|
| 家庭互动 	 | [家庭互动](../phone/04.1-family.png) | A01: setting-public.json | 下方 4 个按钮及切换原生，上面内容嵌入示例 h5 |
| 内容点播 	 | [内容点播](../phone/04.2-list.png) |  | 嵌入示例 h5 |
| 绘本 	 | [绘本](../phone/04.3-content.png) |  | 嵌入示例 h5 |
| 我的 	 | [我的](../phone/04.4-personal.png) |  | 原生界面 |
|  	 | 版本号 |  |  |
|  	 | 设备 |  | 跳转至设备界面 |
|  	 | 邀请码 |  | 微信分享 h5 页面（好友、朋友圈），无邀请码逻辑 |
|  	 | 退出 |  | 退出登录 |

详细需求解释：
1. 最下面 4 个切换项原生实现 
2. “我的”界面全部原生实现，功能只实现 版本号、设备、邀请码、退出
3. “邀请码”只是微信分享，分享给好友或朋友圈，无邀请码逻辑；页面先注册（同手机注册页面），再下载app，页面地址为 setting-public.json 里的 download


## 数据统计相关

1. 设备旋转：通过手机旋转 pad，自定义消息传递指令，pad底层提供旋转控制方法
2. 打点统计：需求待沟通