# 重大变更

因为设计地方较多，为了方便处理，单独描述，其他地方文档暂时不动，冲突矛盾之处以本文档为主进行开发并修改其他地方文档


## OEM 与 token

1. pad 端维持目前结构不变
2. 手机端登录时不分配 token；绑定成功后再返回 token；
3. 手机和 pad端获取 token 都只能使用 [OEM 接口](./oem-imei.html)



## 角色与个人名称

业务逻辑描述

1. 1个 pad设备 可以被多个手机扫码绑定；场景是 1个孩子多个家长
2. 1个 手机 也可以扫码绑定多个 pad设备；场景是 1个家长多个孩子
3. 角色是关系描述，同一个手机绑定设备不同，角色不同
4. 名字是个人定义，设备既定，名字既定；但目前没有名字；大多时候使用名字实际意义不大

实现方式约定

1. 手机端保持现在登录交互不变，绑定时选择对应角色，默认选中之前的角色
2. A06 接口增加 role 字段并存入 contacts 表，同时更新 user 表 role、name、portrait 字段
3. pad用户列表里显示对应角色，手机设备列表里显示名字